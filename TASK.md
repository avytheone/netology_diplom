# Cardiovascular Disease Analysis Project

## Основная задача

Провести полный цикл анализа данных сердечно-сосудистых заболеваний (EDA + моделирование) и подготовить исчерпывающий отчет в формате Quarto документа.
Внешнюю информацию о датасете можно найти по ссылке: https://www.kaggle.com/datasets/sulianova/cardiovascular-disease-dataset

Датасет содержит 70,000 записей о пациентах с 11 признаками и целевой переменной.

Описание признаков: - age - возраст в днях - gender - пол (1 - женщина, 2 - мужчина) - height - рост в см - weight - вес в кг - ap_hi - систолическое артериальное давление - ap_lo - диастолическое артериальное давление - cholesterol - уровень холестерина (1: нормальный, 2: выше нормы, 3: высокий) - gluc - уровень глюкозы (1: нормальный, 2: выше нормы, 3: высокий) - smoke - курение (0: нет, 1: да) - alco - употребление алкоголя (0: нет, 1: да) - active - физическая активность (0: нет, 1: да) - cardio - наличие сердечно-сосудистого заболевания (0: нет, 1: да)

## Декомпозиция задачи

### 1. Подготовительный этап
- [ ] Изучить рекомендации ментора в `docs/mentor-recommendations.md`
- [ ] Ознакомиться с набором данных `cardio_train.csv`
- [ ] Планирование структуры анализа

### 2. EDA (Исследовательский анализ данных)
- [ ] Загрузка и первичная проверка данных
- [ ] Очистка данных: работа с пропусками, дубликатами, аномалиями
- [ ] Анализ выбросов и принятие решений об их обработке
- [ ] Статистический анализ основных характеристик
- [ ] Визуализация распределений признаков
- [ ] Анализ корреляций и взаимосвязей
- [ ] Сегментация данных по ключевым признакам

### 3. Предобработка и моделирование
- [ ] Нормализация/стандартизация признаков
- [ ] Разделение на обучающую и тестовую выборки
- [ ] Выбор и обучение моделей (минимум 2 подхода)
- [ ] Оценка качества моделей
- [ ] Анализ важности признаков
- [ ] Сравнительный анализ моделей

### 4. Интерпретация и выводы
- [ ] Формулирование ключевых выводов
- [ ] Практические рекомендации для мед. лаборатории
- [ ] Обсуждение ограничений исследования
- [ ] Направления для будущих исследований

## Требования к Quarto документу (research.qmd)

### Структура документа
1. **Введение** - постановка проблемы и цели исследования
2. **Обзор данных** - описание датасета и признаков
3. **Методология** - подходы к анализу и моделированию
4. **Результаты EDA** - ключевые находки с визуализациями
5. **Построение моделей** - процесс и результаты моделирования
6. **Сравнительный анализ** - оценка и сравнение моделей
7. **Обсуждение** - интерпретация результатов
8. **Заключение** - основные выводы и рекомендации

### Технические требования
- ✅ **Минимум статических данных** - все цифры, проценты, статистики должны вычисляться в коде
- ✅ **Линейное повествование** - логическая последовательность анализа от загрузки до выводов
- ✅ **Документация кода** - каждый блок кода сопровождается markdown объяснением
- ✅ **Ясные заголовки** - каждый раздел имеет четкое назначение
- ✅ **Воспроизводимость** - анализ должен быть полностью воспроизводимым

## Требования к визуализациям

### Стиль и дизайн
- **Однофокусный подход**: один график на одной figure
- **Цветовая схема**: монохромная основа с серыми оттенками + красные/коралловые акценты для важных элементов
- **Информативность**: все графики должны содержать заголовки, подписи осей, легенды (при необходимости)

### Типы визуализаций для включения

#### **Описательные графики (EDA)**
- **Гистограммы распределений** всех числовых признаков (возраст, рост, вес, давление)
- **Box plots и violin plots** для анализа распределений и выбросов по категориям
- **Count plots** для категориальных переменных (пол, холестерин, глюкоза, привычки)
- **Population pyramids** для анализа демографической структуры
- **Возрастные когорты** с сегментацией по риску

#### **Аналитические графики**
- **Корреляционные матрицы** (тепловые карты) с иерархической кластеризацией
- **Pair plots** для визуализации попарных взаимосвязей ключевых признаков
- **Scatter plots с регрессионными линиями** для анализа зависимостей
- **Violin plots** для сравнения распределений между группами (больные/здоровые)
- **Radar charts** для профилирования пациентов по множеству факторов

#### **Специализированные медицинские графики**
- **IMD (BMI) распределения** с категоризациями (недостаточный вес, норма, избыточный, ожирение)
- **Давление диаграммы** (systolic vs diastolic) с цветовой кодировкой риска
- **Возрастные кривые заболеваемости** с доверительными интервалами
- **Композитные индексы риска** с визуализацией пороговых значений

#### **Графики для моделирования**
- **ROC-кривые** для всех моделей с AUC значениями
- **Precision-Recall кривые** для анализа дисбаланса классов
- **Confusion matrices** с нормализацией и процентами
- **Calibration plots** для оценки вероятностных предсказаний
- **Learning curves** для анализа обучения моделей
- **Feature importance графики** (bar plots, SHAP values)
- **Decision boundaries** для 2D проекций признаков

#### **Сравнительные и итоговые графики**
- **Model comparison charts** - сравнительные столбчатые диаграммы метрик
- **Residual plots** для анализа качества моделей
- **Cumulative gain charts** для оценки предсказательной силы
- **Risk stratification plots** - сегментация пациентов по уровням риска
- **Cost-benefit analysis** визуализации (при наличии данных)

#### **Интерактивные элементы (для HTML версии)**
- **Интерактивные scatter plots** с tooltip информацией
- **Фильтруемые таблицы** с данными пациентов
- **Динамические age-bands** с изменяемыми порогами
- **Interactive risk calculator** (если возможно реализовать)

### Требования к качеству графиков
- **Четкие, читаемые подписи** на русском языке с указанием единиц измерения
- **Адекватный размер шрифта** (не менее 10pt для подписей осей)
- **Неперекрывающиеся легенды** с позиционированием вне области данных
- **Сохранение соотношения сторон** для корректной интерпретации
- **Статистическая значимость** - обозначение p-values и доверительных интервалов
- **Аннотации** для ключевых точек и выбросов
- **Единая цветовая палитра** throughout документа для consistency
- **Высокое разрешение** (300dpi для PDF export)
- **Адаптивный дизайн** для разных размеров экрана (HTML версия)

### Особые требования для медицинских данных
- **Конфиденциальность** - агрегирование данных при необходимости
- **Клиническая релевантность** - пороговые значения должны соответствовать медицинским стандартам
- **Понятность для не-аналитиков** - легенда и подписи должны быть понятны мед. персоналу
- **Этическая визуализация** - избегать искажения данных в графических представлениях

## Данные проекта

### Входные данные
- **Основной датасет**: `cardio_train.csv`
- **Формат**: CSV с разделителем ';'
- **Ожидаемое содержимое**: данные о пациентах, их характеристиках и наличии сердечно-сосудистых заболеваний

### Выходные артефакты
1. **Исходный документ**: `research.qmd` - Quarto notebook с полным анализом
2. **PDF версия**: `out/research.pdf` - срендеренный PDF документ
3. **HTML версия**: `out/research.html` - интерактивная HTML версия

### Дополнительные файлы (опционально)
- `out/models/` - сохраненные модели для последующего использования
- `out/figures/` - отдельные файлы с графиками (если потребуется)
- `data/processed/` - очищенные и обработанные данные

## Спецификации моделей и метрик

### Требования к моделям
- **Минимальные требования к производительности**:
  - AUC-ROC > 0.75
  - Accuracy > 0.70
  - F1-Score > 0.65
- **Обязательные модели**:
  - Logistic Regression (baseline)
  - Один продвинутый алгоритм (Random Forest/XGBoost/Neural Network)
- **Валидация**: 5-fold cross-validation со стратификацией
- **Метрики для оценки**: AUC, Accuracy, Precision, Recall, F1-score, Specificity

### Приоритезация визуализаций

| Приоритет | Тип визуализации | Сложность реализации | Влияние |
|----------|------------------|----------------------|---------|
| 1 | Базовые распределения (гистограммы, box plots) | Низкая | Высокое |
| 1 | Корреляционная тепловая карта | Низкая | Высокое |
| 2 | ROC-кривые, confusion matrices | Средняя | Высокое |
| 3 | BMI распределения, давление диаграммы | Средняя | Среднее |
| 4 | Интерактивные элементы | Высокая | Среднее |

## Контроль качества и валидация

### Чекпоинты качества
- **Валидация данных**: проверка пропусков, выбросов, аномалий
- **Code Review**: рецензирование анализа кода
- **Воспроизводимость**: запуск ноутбука с нуля
- **Клиническая валидация**: проверка выводов с мед. экспертом

### Критерии приемки
- [ ] Данные успешно загружены и провалидированы
- [ ] EDA выполняется без ошибок
- [ ] Модели соответствуют минимальным требованиям производительности
- [ ] Документ рендерится в PDF и HTML
- [ ] Медицинский эксперт одобрил выводы

## Технические спецификации

### Стек технологий
- **Python**: 3.12+
- **Основные библиотеки**: 
  - pandas >= 2.0.0
  - scikit-learn >= 1.3.0
  - matplotlib >= 3.7.0
  - seaborn >= 0.12.0
- **Инструменты разработки**: 
  - UV package manager
  - Quarto >= 1.4.0

### Производительность
- **Загрузка данных**: < 5 секунд для 70k записей
- **Обучение моделей**: < 2 минут на модель
- **Рендеринг документа**: < 30 секунд
- **Использование памяти**: < 4GB RAM

## Управление рисками

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| Низкое качество данных | Средняя | Высокое | Протоколы валидации, очистка |
| Переобучение моделей | Средняя | Среднее | Cross-validation, регуляризация |
| Срыв сроков | Низкая | Высокое | Приоритизация MVP подхода |

## Структура директорий

```
diabetes/
├── TASK.md (этот файл)
├── research.qmd (основной анализ)
├── presentation.qmd (презентация для стейкхолдеров)
├── data/
│   ├── raw/ (оригинальные данные)
│   └── processed/ (очищенные данные)
├── models/ (обученные модели)
├── figures/ (индивидуальные графики)
├── utils/ (вспомогательные функции)
└── out/ (отрендеренные документы)
```

## Критерии успеха

### Технические критерии
- ✅ Код выполняется без ошибок и предупреждений
- ✅ Все зависимости управляются через UV с версионированием
- ✅ Анализ полностью воспроизводим на чистой системе
- ✅ Файлы корректно генерируются в указанной директории
- ✅ Производительность соответствует спецификациям

### Аналитические критерии
- ✅ Проведен полный EDA с клинически значимыми инсайтами
- ✅ Построены и оценены минимум 2 модели с требуемой производительностью
- ✅ Результаты правильно интерпретированы с учетом медицинского контекста
- ✅ Выводы основаны на данных и статистически значимы (p < 0.05)

### Качественные критерии
- ✅ Четкая структура документа с логической последовательностью
- ✅ Понятные объяснения методов для мед. персонала
- ✅ Практическая ценность для принятия решений в мед. лаборатории
- ✅ Профессиональное оформление визуализаций в соответствии с медицинскими стандартами


